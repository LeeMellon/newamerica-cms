{% extends "program_base.html" %}

{% load wagtailcore_tags %}
{% load wagtailimages_tags %}
{% load utilities %}

{% block body_class %}template-postpage{% endblock %}

{% block content %}

	{% block page-title %}
	{% endblock %}

	{% if all_posts.has_previous %}
			<a href="?page={{ all_posts.previous_page_number }}">Previous</a>
	{% endif %}
	
	{% for page_num in all_posts.paginator.num_pages|get_range  %}
		<a href="?page={{ page_num }}">{{ page_num }}</a>
	{% endfor %}
	
	{% if all_posts.has_next %}
    	<a href="?page={{ all_posts.next_page_number }}">Next</a>
	{% endif %}

	<div class="row content-grid__controls">
		<div class="column small-12 medium-4 large-4 content-grid__controls__program-filter">
			<select>
				<option value="all">All Initiatives</option>
				<option value="open">Open Technology Institute</option>
				<option value="education">Education Policy</option>
				<option value="asset">Asset Building</option>
	        </select>
	    </div>
	    <div class="column small-12 medium-4 large-4 content-grid__controls__date-filter">
			<select>
				<option value="all">All Dates</option>
	        </select>
	    </div>
	    <div class="column small-12 medium-4 large-4 content-grid__controls__search">
      		<input type="search" placeholder="Search Results">
        </div>
	</div>

	<div class="content-grid__entries">

		{% for post in all_posts %}
			<div class="content-entry {{ post.get_page_type }}">
				{% if post.story_image %}
					{% image post.story_image original as post_image %}

					<a href="{{ post.url }}">
						<div class="content-entry__image-container" style="background-image: url('{{post_image.url}}') ">
						</div>
					</a>
				<div class="content-entry__text-container has-image">
				
				{% else %}
				<div class="content-entry__text-container">
				{% endif %}
					<div class="content-entry__text">
						{% if post.post_subprogram.all %}
							<h5 class="content-entry__text__program">
							{% for subprogram in post.post_subprogram.all %}
								<a href="{{ subprogram.url }}"> {{ subprogram | upper }}</a>{% listify forloop.revcounter0 %}
							{% endfor %}
							</h5>
						{% endif %}
						<h5 class= "content-entry__text__title"><a href="{{ post.url }}">{{ post.title }}</a></h5>
						{% generate_byline post.content_type post.post_author.all %}
						{{ post.sub_headline }}

						{% if post.post_author.all %}
							<h5 class= "content-entry__text__author">By
							{% for author in post.post_author.all %}
								<a href="{{ author.url }}">{{author.first_name }} {{author.last_name }}</a>{% listify forloop.revcounter0 %}
							{% endfor %}
							</h5>
						{% endif %}
						<h5 class= "content-entry__text__date">{{ post.date }} </h5>
						<p class= "content-entry__text__excerpt">{{ post.story_excerpt }}</p>
						
					</div>
				</div>
			</div>
			<hr>
		{% endfor %}

	</div>


{% endblock %}