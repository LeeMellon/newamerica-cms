{% load utilities %}
{% load wagtailimages_tags %}

<script type="text/javascript">
	if (!window.timelineEventLists) {
		var timelineEventSettings = [];
	}
	timelineEventSettings.push({{ settings_json|safe }});

	console.log(timelineEventSettings);
</script>


<div class="timeline">
	<div class="timeline__nav"></div>
	<div class="timeline__content">
		{% for event in sorted_event_list %}
			<div class="timeline__event" id="event-{{ forloop.counter0 }}">
				<div class="timeline__event__text">
					{% if event.end_date %}
						<div class="timeline__event__date">{{ event.start_date }} - {{ event.end_date }}</div>
					{% else %}
						<div class="timeline__event__date">{{ event.start_date }}</div>
					{% endif %}
					<div class="timeline__event__title">{{ event.title }}</div>
					{% if event.description %}
						<div class="timeline__event__description post-body">{{ event.description }}</div>
					{% endif %}
				</div>
				{% if event.image or event.video %}
					<div class="timeline__event__media">
						{% if event.video %}
							{{ event.video }}
						{% else %}
							{% image event.image min-800x800 as img %}
							<img class="timeline__event__media__image" {{ img.attrs }}/>
						{% endif %}
					</div>
				{% endif %}
			</div>
		{% endfor %}

		<div class="timeline__next-prev-container">
			<div class="timeline__prev">
				<h5 class="timeline__next-prev__date"></h5>
				<h5 class="timeline__next-prev__title"></h5>
			</div>
			<div class="timeline__next">
				<h5 class="timeline__next-prev__date"></h5>
				<h5 class="timeline__next-prev__title"></h5>
			</div>
		</div>
	</div>
	
</div>